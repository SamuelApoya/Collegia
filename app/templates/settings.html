{% extends "base.html" %}
{% block content %}

<div class="container">
    <div class="hero">
        <div>
            <h1>Settings</h1>
            <p>Manage your account preferences</p>
        </div>
        <div class="hero-badge">{{ current_user.role.upper() }}</div>
    </div>

    <div class="settings-grid">
        <div class="settings-content">
            <h2 style="margin-bottom: 24px; font-size: 24px;">Account Settings</h2>

            <form method="POST" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    {{ form.name(class="form-control", placeholder="Enter your full name") }}
                </div>

                <div class="form-group">
                    <label class="form-label">Profile Picture</label>
                    
                    <div style="margin-bottom: 20px; text-align: center;">
                        <img id="profile-preview" 
                             src="{{ url_for('static', filename='uploads/profiles/' + current_user.profile_picture) }}" 
                             alt="Profile" 
                             style="width: 150px; height: 150px; border: 4px solid var(--border); object-fit: cover; display: block; margin: 0 auto 16px;"
                             onerror="this.src='/static/uploads/profiles/logo.png'">
                    </div>
                    
                    <div style="background: #E3F2FD; padding: 16px; margin-bottom: 12px; border-left: 4px solid var(--primary);">
                        <p style="font-size: 14px; margin-bottom: 8px;">ðŸ“¸ Choose a profile picture (JPG, PNG, GIF)</p>
                        <p style="font-size: 12px; color: var(--gray);">Your photo will be displayed on your profile</p>
                    </div>
                    {{ form.profile_picture(class="form-control", id="profile_picture") }}
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="text" class="form-control" value="{{ current_user.email }}" disabled style="background: #f5f5f5; cursor: not-allowed;">
                    <small style="color: var(--gray); font-size: 12px;">Your email address cannot be changed</small>
                </div>

                <div class="form-group">
                    <label class="form-label">New Password</label>
                    {{ form.new_password(class="form-control", placeholder="Leave blank to keep current password") }}
                </div>

                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    {{ form.confirm_password(class="form-control", placeholder="Re-enter new password") }}
                </div>

                <div style="padding: 16px; background: #FFF3E0; border-left: 4px solid var(--accent); margin-bottom: 24px;">
                    <p style="font-size: 14px;">Make sure to save your changes before leaving this page</p>
                </div>

                <button type="submit" class="btn btn-primary">Update Settings</button>
            </form>
        </div>
    </div>
</div>

{% endblock %}