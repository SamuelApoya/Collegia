{% extends "base.html" %}
{% block content %}

<div class="container container-padding">
    <div class="dashboard-header">
        <h1>Settings</h1>
        <p>Manage your account preferences</p>
    </div>

    <div class="settings-grid">
        <div class="settings-content">
            <h2 class="section-heading">Account Settings</h2>

            <form method="POST" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    {{ form.name(class="form-control", placeholder="Enter your full name") }}
                </div>

                <div class="form-group">
                    <label class="form-label">Profile Picture</label>
                    
                    <div class="profile-preview-wrapper">
                        <img id="profile-preview" 
                             src="{{ url_for('static', filename='uploads/profiles/' + current_user.profile_picture) }}?v={{ range(1, 1000000) | random }}" 
                             alt="Profile" 
                             class="profile-preview-img"
                             onerror="this.src='/static/uploads/profiles/logo.png'">
                    </div>
                    
                    <div class="info-box info-box-blue">
                        <p class="info-box-title">Choose a profile picture (JPG, PNG, GIF)</p>
                        <p class="info-box-subtitle">Your photo will be displayed on your profile</p>
                    </div>
                    {{ form.profile_picture(class="form-control", id="profile_picture") }}
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="text" class="form-control form-control-disabled" value="{{ current_user.email }}" disabled>
                    <small class="form-helper-text">Your email address cannot be changed</small>
                </div>

                <div class="form-group">
                    <label class="form-label">New Password</label>
                    {{ form.new_password(class="form-control", placeholder="Leave blank to keep current password") }}
                </div>

                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    {{ form.confirm_password(class="form-control", placeholder="Re-enter new password") }}
                </div>

                <div class="info-box info-box-orange">
                    <p class="info-box-text">Make sure to save your changes before leaving this page</p>
                </div>

                <button type="submit" class="btn btn-primary">Update Settings</button>
            </form>
        </div>
    </div>
</div>

{% endblock %}