{% extends "base.html" %}
{% block content %}

<div class="container">

  <div class="hero">
    <div>
      <h2>Manage Sessions</h2>
      <p>Create availability and review student meetings</p>
    </div>
    <div class="hero-role">Professor</div>
  </div>

  <div class="stats-grid">
    <div class="stat-card purple">
      <div class="stat-title">Open Slots</div>
      <div class="stat-value">{{ slots|length }}</div>
    </div>

    <div class="stat-card blue">
      <div class="stat-title">Booked Sessions</div>
      <div class="stat-value">{{ meetings|length }}</div>
    </div>

    <div class="stat-card green">
      <div class="stat-title">Status</div>
      <div class="stat-value status-active">Active</div>
    </div>
  </div>

  <div class="dashboard-card">
    <h2 class="section-title">Your Open Slots</h2>

    {% if slots %}
      <div class="session-grid">
        {% for slot in slots %}
        <div class="meeting-card {% if slot.booked %}slot-booked{% else %}slot-active{% endif %}">
          <div class="meeting-header">
            {% if slot.booked %}Booked Slot{% else %}Available Slot{% endif %}
          </div>
          <div class="meeting-body">
            <strong>Date:</strong> {{ slot.date }}<br>
            <strong>Time:</strong> {{ slot.time }}
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-box">No availability added yet.</div>
    {% endif %}
  </div>

  <div class="dashboard-card">
    <h2 class="section-title">Your Booked Sessions</h2>

    {% if meetings %}
      <div class="session-grid">
        {% for meet in meetings %}
        <div class="meeting-card slot-booked">
          <div class="meeting-header">Booked Meeting</div>
          <div class="meeting-body">
            <strong>Student:</strong> {{ meet.student }}<br>
            <strong>Date:</strong> {{ meet.date }}<br>
            <strong>Time:</strong> {{ meet.time }}<br>
            <strong>Notes:</strong> {{ meet.notes }}
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-box">No booked sessions yet.</div>
    {% endif %}
  </div>

  <div class="dashboard-grid">
    <div class="dashboard-card">
      <h2 class="section-title">Add New Availability</h2>

      <form method="POST">
        {{ form.hidden_tag() }}
        {{ form.date(class="login-input") }}
        {{ form.time(class="login-input") }}
        <button class="login-btn" type="submit">Add Availability</button>
      </form>
    </div>

    <div class="dashboard-card">
      <h2 class="section-title">Quick Tips</h2>

      <div class="tips-grid">
        <div class="tip-card">âœ… Students can instantly book from your open slots</div>
        <div class="tip-card">ðŸ”’ Booked slots become locked automatically</div>
        <div class="tip-card">ðŸ“… Update availability weekly for best engagement</div>
      </div>
    </div>
  </div>

</div>

{% endblock %}