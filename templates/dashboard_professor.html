{% extends "base.html" %}
{% block content %}

<div class="hero">
  <div>
    <h2>Manage Sessions</h2>
    <p>Create availability and review student meetings</p>
  </div>
  <div class="hero-role">Professor</div>
</div>

<div class="stats-grid">
  <div class="stat-card purple">
    <div class="stat-title">Open Slots</div>
    <div class="stat-value">{{ slots|length }}</div>
  </div>

  <div class="stat-card blue">
    <div class="stat-title">Booked Sessions</div>
    <div class="stat-value">{{ meetings|length }}</div>
  </div>

  <div class="stat-card green">
    <div class="stat-title">Status</div>
    <div class="stat-value">Active</div>
  </div>
</div>

<div class="dashboard-grid">

  <div>

    <h3>Your Open Slots</h3>

    {% for slot in slots %}
    <div class="meeting-card">
      <div class="meeting-header">Available Slot</div>
      <div class="meeting-body">
        <b>Date:</b> {{ slot.date }}<br>
        <b>Time:</b> {{ slot.time }}
      </div>
    </div>
    {% else %}
    <div class="empty-card">No availability added yet.</div>
    {% endfor %}

    <h3>Your Booked Sessions</h3>

    {% for meet in meetings %}
    <div class="meeting-card">
      <div class="meeting-header">Booked Meeting</div>
      <div class="meeting-body">
        <b>Student:</b> {{ meet.student }}<br>
        <b>Notes:</b> {{ meet.notes }}
      </div>
    </div>
    {% else %}
    <div class="empty-card">No booked sessions yet.</div>
    {% endfor %}

  </div>

  <div>

    <div class="quick-card">
      <h3>Add New Availability</h3>

      <form method="POST">
        {{ form.hidden_tag() }}

        {{ form.date(class="login-input") }}
        {{ form.time(class="login-input") }}

        <button class="login-btn" type="submit">Add Availability</button>
      </form>
    </div>

    <div class="quick-card">
      <h3>Quick Tips</h3>
      <p>Students can instantly book from your open slots.</p>
      <p>Greyed slots become locked once booked.</p>
    </div>

  </div>

</div>

{% endblock %}
